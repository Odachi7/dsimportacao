<UserControl x:Class="DSI.Desktop.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:DSI.Desktop.ViewModels"
             Background="{StaticResource BackgroundBrush}">
    

    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- CabeÃ§alho -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Dashboard" FontSize="32" FontWeight="Bold" 
                       Foreground="{StaticResource TextPrimaryBrush}"/>
            <TextBlock Text="Gerencie e execute seus jobs de importaÃ§Ã£o" 
                       FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" 
                       Margin="0,5,0,0"/>
        </StackPanel>

        <!-- BotÃµes de AÃ§Ã£o -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" 
                    VerticalAlignment="Top" Margin="0,10,0,0">
            <Button Content="âž• Novo Job" Style="{StaticResource PrimaryButton}" 
                    Command="{Binding NovoJobCommand}" Margin="0,0,10,0"/>
            <Button Content="ðŸ”„ Atualizar" Style="{StaticResource SecondaryButton}" 
                    Command="{Binding CarregarJobsCommand}"/>
        </StackPanel>

        <!-- Lista de Jobs -->
        <Border Grid.Row="1" Background="{StaticResource SurfaceBrush}" 
                CornerRadius="8" Padding="0">
            <Grid>
                <!-- Loading -->
                <ProgressBar IsIndeterminate="True" Height="4" VerticalAlignment="Top"
                             Visibility="{Binding Carregando, Converter={StaticResource BoolToVisibilityConverter}}"/>

                <DataGrid ItemsSource="{Binding Jobs}" 
                          SelectedItem="{Binding JobSelecionado}"
                          AutoGenerateColumns="False" 
                          IsReadOnly="True"
                          HeadersVisibility="Column"
                          GridLinesVisibility="None"
                          SelectionMode="Single"
                          RowHeight="50"
                          BorderThickness="0">
                    
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Nome" Binding="{Binding Nome}" Width="2*"/>
                        <DataGridTextColumn Header="DescriÃ§Ã£o" Binding="{Binding Descricao}" Width="3*"/>
                        <DataGridTextColumn Header="Ativo" Binding="{Binding Ativo}" Width="*"/>
                        <DataGridTextColumn Header="Criado Em" Binding="{Binding CriadoEm, StringFormat=dd/MM/yyyy}" Width="*"/>
                        
                        <DataGridTemplateColumn Header="AÃ§Ãµes" Width="Auto">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Button Content="â–¶ï¸ Executar" Style="{StaticResource PrimaryButton}" 
                                                Command="{Binding DataContext.ExecutarJobCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                Margin="5"/>
                                        <Button Content="âœï¸ Editar" Style="{StaticResource SecondaryButton}"
                                                Command="{Binding DataContext.EditarJobCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                Margin="5"/>
                                        <Button Content="ðŸ—‘ï¸ Excluir" Style="{StaticResource DangerButton}"
                                                Command="{Binding DataContext.ExcluirJobCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                Margin="5"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
    </Grid>
</UserControl>
